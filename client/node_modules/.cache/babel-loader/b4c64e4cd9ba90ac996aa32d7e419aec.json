{"ast":null,"code":"import _classCallCheck from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import openSocket from'socket.io-client';import Post from'../post/post';import{connect}from'react-redux';import*as actionCreators from'../../store/action/actions';import'./wall.css';var Wall=/*#__PURE__*/function(_React$Component){_inherits(Wall,_React$Component);function Wall(){var _getPrototypeOf2;var _this;_classCallCheck(this,Wall);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Wall)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.componentDidMount=function(){var socket=openSocket('https://clanimba.herokuapp.com/');//const socket = openSocket('https://localhost:8080');\nsocket.on('posts',function(data){console.log(\"socket new post reached \"+JSON.stringify(data.post));//Switch set up in case of future seperation between create and reply reducer dispatch\nswitch(data.action){case'create':console.log(\"socket new post reached\");_this.props.savePost(data.post);break;case'reply':console.log(\"socket reply reached\");_this.props.savePost(data.post);break;}});};return _this;}_createClass(Wall,[{key:\"componentWillMount\",value:function componentWillMount(){this.props.findPosts();}},{key:\"render\",value:function render(){var postList=this.props.post.map(function(post){return React.createElement(Post,{opId:post._id,msg:post.post,userName:post.user,posterIcon:post.charImg,replyMsgs:post.replies});});return React.createElement(\"div\",{className:\"wall\"},postList.reverse());}}]);return Wall;}(React.Component);;var mapStatetoProps=function mapStatetoProps(state){return{battletag:state.battletag,post:state.post};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{findPosts:function findPosts(){return dispatch(actionCreators.findPosts());},savePost:function savePost(data){return dispatch({type:'SAVE_MSG',result:{data:data}});}//saveUser: () => dispatch({type: 'SAVE_USER'})\n};};export default connect(mapStatetoProps,mapDispatchToProps)(Wall);","map":{"version":3,"sources":["/home/davidbland/Documents/projects/clanimba_MERN/client/src/components/wall/wall.js"],"names":["React","openSocket","Post","connect","actionCreators","Wall","componentDidMount","socket","on","data","console","log","JSON","stringify","post","action","props","savePost","findPosts","postList","map","_id","user","charImg","replies","reverse","Component","mapStatetoProps","state","battletag","mapDispatchToProps","dispatch","type","result"],"mappings":"qsBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAO,GAAKC,CAAAA,cAAZ,KAAgC,4BAAhC,CACA,MAAO,YAAP,C,GAEMC,CAAAA,I,mYAQJC,iB,CAAoB,UAAM,CACxB,GAAMC,CAAAA,MAAM,CAAGN,UAAU,CAAC,iCAAD,CAAzB,CACA;AACAM,MAAM,CAACC,EAAP,CAAU,OAAV,CAAmB,SAAAC,IAAI,CAAI,CACzBC,OAAO,CAACC,GAAR,CAAY,2BAA6BC,IAAI,CAACC,SAAL,CAAeJ,IAAI,CAACK,IAApB,CAAzC,EACA;AACA,OAAOL,IAAI,CAACM,MAAZ,EACE,IAAK,QAAL,CAAgBL,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACA,MAAKK,KAAL,CAAWC,QAAX,CAAoBR,IAAI,CAACK,IAAzB,EACA,MAChB,IAAK,OAAL,CAAeJ,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACA,MAAKK,KAAL,CAAWC,QAAX,CAAoBR,IAAI,CAACK,IAAzB,EACA,MANjB,CAQD,CAXD,EAYD,C,+FArBmB,CAElB,KAAKE,KAAL,CAAWE,SAAX,GACD,C,uCAoBO,CACN,GAAIC,CAAAA,QAAQ,CAAG,KAAKH,KAAL,CAAWF,IAAX,CAAgBM,GAAhB,CAAqB,SAAAN,IAAI,QAAI,qBAAC,IAAD,EAAM,IAAI,CAAEA,IAAI,CAACO,GAAjB,CAAsB,GAAG,CAAEP,IAAI,CAACA,IAAhC,CAAsC,QAAQ,CAAEA,IAAI,CAACQ,IAArD,CAA2D,UAAU,CAAER,IAAI,CAACS,OAA5E,CAAqF,SAAS,CAAET,IAAI,CAACU,OAArG,EAAJ,EAAzB,CAAf,CACA,MACE,4BAAK,SAAS,CAAC,MAAf,EACGL,QAAQ,CAACM,OAAT,EADH,CADF,CAKD,C,kBAhCgBzB,KAAK,CAAC0B,S,EAiCxB,CAED,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,QAAK,CAChCC,SAAS,CAAED,KAAK,CAACC,SADe,CAEhCf,IAAI,CAAEc,KAAK,CAACd,IAFoB,CAAL,EAA7B,CAKA,GAAMgB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAO,CACLb,SAAS,CAAE,2BAAMa,CAAAA,QAAQ,CAAC3B,cAAc,CAACc,SAAf,EAAD,CAAd,EADN,CAELD,QAAQ,CAAE,kBAACR,IAAD,QAAUsB,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAE,UAAP,CAAmBC,MAAM,CAAE,CAACxB,IAAI,CAAJA,IAAD,CAA3B,CAAD,CAAlB,EACV;AAHK,CAAP,CAKD,CAND,CAQA,cAAeN,CAAAA,OAAO,CAACwB,eAAD,CAAkBG,kBAAlB,CAAP,CAA6CzB,IAA7C,CAAf","sourcesContent":["import React from 'react';\nimport openSocket from 'socket.io-client';\nimport Post from '../post/post';\nimport { connect } from 'react-redux';\nimport * as actionCreators from '../../store/action/actions';\nimport './wall.css';\n\nclass Wall extends React.Component{\n\n  componentWillMount(){\n   \n    this.props.findPosts();\n  }\n\n    \n  componentDidMount = () => {\n    const socket = openSocket('https://clanimba.herokuapp.com/');\n    //const socket = openSocket('https://localhost:8080');\n    socket.on('posts', data => {\n      console.log(\"socket new post reached \" + JSON.stringify(data.post));\n      //Switch set up in case of future seperation between create and reply reducer dispatch\n      switch(data.action){\n        case 'create' : console.log(\"socket new post reached\");\n                        this.props.savePost(data.post);\n                        break;\n        case 'reply' : console.log(\"socket reply reached\");\n                       this.props.savePost(data.post);\n                       break;\n      }\n    });\n  }\n\n  render(){\n    let postList = this.props.post.map( post => <Post opId={post._id} msg={post.post} userName={post.user} posterIcon={post.charImg} replyMsgs={post.replies} /> );\n    return (\n      <div className=\"wall\">\n        {postList.reverse()}\n      </div>\n    );\n  };\n};\n\nconst mapStatetoProps = state => ({\n  battletag: state.battletag,\n  post: state.post\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    findPosts: () => dispatch(actionCreators.findPosts()),\n    savePost: (data) => dispatch({type: 'SAVE_MSG', result: {data}})\n    //saveUser: () => dispatch({type: 'SAVE_USER'})\n  };\n};\n\nexport default connect(mapStatetoProps, mapDispatchToProps)(Wall);\n"]},"metadata":{},"sourceType":"module"}
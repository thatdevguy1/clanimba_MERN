{"ast":null,"code":"import _classCallCheck from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/davidbland/Documents/projects/clanimba_MERN/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{connect}from'react-redux';import User from'../user/user';import'./newPost.css';import*as actionCreators from'../../store/action/actions';import{TextField}from'@material-ui/core';import openSocket from'socket.io-client';var NewPost=/*#__PURE__*/function(_React$Component){_inherits(NewPost,_React$Component);function NewPost(){var _getPrototypeOf2;var _this;_classCallCheck(this,NewPost);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NewPost)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={msg:\"\"};_this.componentWillUnmount=function(){};_this.handlePost=function(event){event.preventDefault();_this.refs.textField.children[1].children[0].value=\"\";_this.props.type===\"normalPost\"?_this.props.saveMsg({user:_this.props.battletag,msg:_this.state.msg,icon:_this.props.charImg}):_this.props.saveReply({user:_this.props.battletag,msg:_this.state.msg,icon:_this.props.charImg,opId:_this.props.opId});//send ajax call to post msg\n};_this.handleChange=function(event){_this.setState({msg:event.target.value},function(){});};return _this;}_createClass(NewPost,[{key:\"render\",value:function render(){var userEle=this.props.showIcon?React.createElement(User,{user:this.props.battletag,icon:this.props.charImg,mainIcon:true}):\"\";return React.createElement(\"div\",{className:\"NewPost\"},userEle,React.createElement(TextField,{id:\"outlined-basic\",label:this.props.type===\"normalPost\"?\"New Post\":\"New Reply\",margin:\"normal\",variant:\"outlined\",onChange:this.handleChange,multiline:true,ref:\"textField\"}),React.createElement(\"button\",{className:\"submitPost\",onClick:this.handlePost},\"POST\"));}}]);return NewPost;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{battletag:state.battletag,charImg:state.icon};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{saveMsg:function saveMsg(result){return dispatch(actionCreators.storeMsg(result));},saveReply:function saveReply(result){return dispatch(actionCreators.storeReply(result));}// savePost: (data) => dispatch({type: 'SAVE_MSG', result: {data}})\n};};export default connect(mapStateToProps,mapDispatchToProps)(NewPost);","map":{"version":3,"sources":["/home/davidbland/Documents/projects/clanimba_MERN/client/src/components/newPost/newPost.js"],"names":["React","connect","User","actionCreators","TextField","openSocket","NewPost","state","msg","componentWillUnmount","handlePost","event","preventDefault","refs","textField","children","value","props","type","saveMsg","user","battletag","icon","charImg","saveReply","opId","handleChange","setState","target","userEle","showIcon","Component","mapStateToProps","mapDispatchToProps","dispatch","result","storeMsg","storeReply"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux'\nimport User from '../user/user';\nimport './newPost.css';\nimport * as actionCreators from '../../store/action/actions';\nimport {TextField} from '@material-ui/core';\nimport openSocket from 'socket.io-client';\n\n\n\nclass NewPost extends React.Component {\n  state = {\n    msg: \"\"\n  };\n  \n  // componentDidMount = () => {\n  //   const socket = openSocket('http://localhost:8080');\n  //   socket.on('posts', data => {\n  //     console.log(\"socket new post reached \" + JSON.stringify(data.post));\n  //     if (data.action === 'create') {\n  //       console.log(\"socket new post in if statement reached\");\n  //       this.props.savePost(data.post);\n  //     } \n  //   });\n  // }\n\n  componentWillUnmount = () => {\n\n  }\n\n  handlePost = (event) => {\n    event.preventDefault();\n\n    this.refs.textField.children[1].children[0].value = \"\";\n    \n    this.props.type === \"normalPost\" ? this.props.saveMsg({\n      user: this.props.battletag,\n      msg: this.state.msg,\n      icon: this.props.charImg\n    }) : this.props.saveReply({\n      user: this.props.battletag,\n      msg: this.state.msg,\n      icon: this.props.charImg,\n      opId: this.props.opId\n    })\n    //send ajax call to post msg\n  };\n\n  handleChange = (event) => {\n    this.setState({\n      msg: event.target.value\n    }, ()=>{\n    });\n  };\n\n  render(){\n    let userEle = this.props.showIcon ? <User user={this.props.battletag} icon={this.props.charImg} mainIcon={true}/> : \"\";\n    return (\n      <div className=\"NewPost\">\n       {userEle} \n       <TextField\n            id=\"outlined-basic\"\n            label={this.props.type === \"normalPost\" ? \"New Post\" : \"New Reply\"}\n            margin=\"normal\"\n            variant=\"outlined\"\n            onChange={this.handleChange}\n            multiline={true}\n            ref=\"textField\"\n          />\n        {/* <textarea className=\"postText\" onChange={this.handleChange} placeholder=\"Create New Post...\"></textarea> */}\n        <button className=\"submitPost\" onClick={this.handlePost}>POST</button>\n      </div>\n    ); \n  }\n \n}\n\nconst mapStateToProps = state => ({\n  battletag: state.battletag,\n  charImg: state.icon\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    saveMsg: (result) => dispatch(actionCreators.storeMsg(result)),\n    saveReply: (result) => dispatch(actionCreators.storeReply(result))\n    // savePost: (data) => dispatch({type: 'SAVE_MSG', result: {data}})\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewPost);"]},"metadata":{},"sourceType":"module"}
(this.webpackJsonpclanimba=this.webpackJsonpclanimba||[]).push([[0],{120:function(e,t){},123:function(e,t,n){},124:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){e.exports=n.p+"static/media/allianceFlag.62af69d8.jpg"},146:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),s=n(28),i=n(18),l=n(76),u=(n(91),n(8)),p=n(6),h=n(10),m=n(11),f=n(12),g=n(47),b=n(23),d=n(46),O=n.n(d),v=(n(123),n(35)),y=n.n(v),j=n(174),E=n(178),w=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.icon?"https://render-us.worldofwarcraft.com/character/"+this.props.icon:y.a,t=this.props.mainIcon?{width:"70px",height:"70px",border:"solid 6px #f5f5f5",fontSize:"18px"}:{},n=this.props.mainIcon?{marginBottom:"-40px"}:{},a=this.props.mainIcon?{fontSize:"18px",fontWeight:"bold"}:{};return r.a.createElement("div",{className:"user",style:n},r.a.createElement(j.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(E.a,{src:e,style:t}),r.a.createElement("p",{style:a},this.props.user)))}}]),t}(r.a.Component),S=(n(124),n(30)),k=n.n(S),I=function(e){return{type:"SAVE_MSG",result:e}},_=n(179),N=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={msg:""},n.componentWillUnmount=function(){},n.handlePost=function(e){e.preventDefault(),n.refs.textField.children[1].children[0].value="","normalPost"===n.props.type?n.props.saveMsg({user:n.props.battletag,msg:n.state.msg,icon:n.props.charImg}):n.props.saveReply({user:n.props.battletag,msg:n.state.msg,icon:n.props.charImg,opId:n.props.opId})},n.handleChange=function(e){n.setState({msg:e.target.value},(function(){}))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.showIcon?r.a.createElement(w,{user:this.props.battletag,icon:this.props.charImg,mainIcon:!0}):"";return r.a.createElement("div",{className:"NewPost"},e,r.a.createElement(_.a,{id:"outlined-basic",label:"normalPost"===this.props.type?"New Post":"New Reply",margin:"normal",variant:"outlined",onChange:this.handleChange,multiline:!0,ref:"textField"}),r.a.createElement("button",{className:"submitPost",onClick:this.handlePost},"POST"))}}]),t}(r.a.Component),P=Object(i.b)((function(e){return{battletag:e.battletag,charImg:e.icon}}),(function(e){return{saveMsg:function(t){return e((n=t,function(e){var t={user:n.user,msg:n.msg,icon:n.icon};k.a.post("/msg",t).then((function(t){console.log("The result in the ajax call is: ".concat(JSON.stringify(t))),e(I(t))})).catch((function(e){console.log(e)}))}));var n},saveReply:function(t){return e((n=t,function(e){var t={user:n.user,msg:n.msg,icon:n.icon,opId:n.opId};k.a.put("/reply",t).then((function(t){console.log("The result in the ajax call for REPLY is: ".concat(JSON.stringify(t))),e(I(t))})).catch((function(e){console.log(e)}))}));var n}}}))(N),T=(n(141),n(142),function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"reply"},r.a.createElement("div",{className:"userWrapper"},r.a.createElement(w,{user:this.props.user,icon:this.props.icon})),r.a.createElement("div",{className:"replyMsg"},this.props.msg))}}]),t}(r.a.Component)),x=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.replyMsgs.map((function(e){return console.log("replies loop"),r.a.createElement(T,{user:e.user,icon:e.icon,msg:e.msg})}));return r.a.createElement("div",{className:"post"},r.a.createElement("div",{className:"postMsg"},r.a.createElement(w,{user:this.props.userName,icon:this.props.posterIcon}),r.a.createElement("p",{style:{whiteSpace:"pre-line",wordWrap:"break-word",fontSize:"18px",textAlign:"center"}},this.props.msg),r.a.createElement("hr",null),r.a.createElement("div",{className:"replySection"},r.a.createElement("span",{style:{whiteSpace:"pre-line"}},e),r.a.createElement(P,{type:"replyPost",opId:this.props.opId,showIcon:!1}))))}}]),t}(r.a.Component),M=Object(i.b)((function(e){return{battletag:e.battletag,icon:e.icon,guild:e.guild,post:e.post}}))(x),A=(n(143),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){O()("https://clanimba.herokuapp.com/").on("posts",(function(e){switch(console.log("socket new post reached "+JSON.stringify(e.post)),e.action){case"create":console.log("socket new post reached"),n.props.savePost(e.post);break;case"reply":console.log("socket reply reached"),n.props.savePost(e.post)}}))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.findPosts()}},{key:"render",value:function(){var e=this.props.post.map((function(e){return r.a.createElement(M,{opId:e._id,msg:e.post,userName:e.user,posterIcon:e.charImg,replyMsgs:e.replies})}));return r.a.createElement("div",{className:"wall"},e.reverse())}}]),t}(r.a.Component)),C=Object(i.b)((function(e){return{battletag:e.battletag,post:e.post}}),(function(e){return{findPosts:function(){return e((function(e){k.a.get("/posts").then((function(t){e({type:"SAVE_POSTS",result:t})})).catch((function(e){console.log(e)}))}))},savePost:function(t){return e({type:"SAVE_MSG",result:{data:t}})}}}))(A),D=(n(144),n(145),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},n.componentWillMount=function(){n.props.saveUser(n.props.token)},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement(P,{type:"normalPost",showIcon:!0}),r.a.createElement(C,null))}}]),t}(r.a.Component)),V=Object(i.b)((function(e){return{battletag:e.battletag,charImg:e.icon,guild:e.guild}}),(function(e){return{saveUser:function(t){return e((n=t,function(e){k.a.get("/user/".concat(n)).then((function(t){e(function(e){return{type:"SAVE_USER",result:e}}(t))})).catch((function(e){console.log(e)}))}));var n}}}))(D),W=(n(146),function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Welcome to clan iMBA"),r.a.createElement("a",{href:"/auth"},r.a.createElement("button",null,"Sign in with Blizzard")))}}]),t}(r.a.Component)),R=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.setToken(this.props.location.search)}},{key:"render",value:function(){return r.a.createElement("div",{className:"callback"},r.a.createElement("h1",null,"Success"),r.a.createElement(b.a,{to:"/"}))}}]),t}(r.a.Component),U=(n(148),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={uid:null,token:""},n.setToken=function(e){console.log("setToken is reached");var t=e.split("=");n.setState({auth:!0,token:t[1]},(function(){sessionStorage.setItem("auth","true"),sessionStorage.setItem("token",t[1])}))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){"true"===sessionStorage.getItem("auth")&&this.setState({auth:!0,token:sessionStorage.getItem("token")})}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(b.b,{path:"/",exact:!0,render:1==this.state.auth?function(t){return r.a.createElement(V,Object.assign({},t,{token:e.state.token}))}:function(e){return r.a.createElement(W,e)}}),r.a.createElement(b.b,{path:"/callback",render:function(t){return r.a.createElement(R,Object.assign({},t,{setToken:e.setToken}))}})))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(27),X=n(19);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(X.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={battletag:"",icon:"",guild:"",token:null,post:[]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER":return B({},e,{battletag:t.result.data.battleTag,icon:t.result.data.charImg,guild:t.result.data.guild});case"SAVE_MSG":if(e.post.filter((function(e){return e._id===t.result.data._id})).length>0)var n=e.post.map((function(e){return e._id!=t.result.data._id?e:t.result.data}));else n=[].concat(Object(J.a)(e.post),[t.result.data]);return B({},e,{post:n});case"SAVE_POSTS":return console.log("getting posts reached in reducer"+JSON.stringify(t.result.data)),B({},e,{post:t.result.data})}return e};window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;var G=Object(s.c)(F,Object(s.a)(l.a));c.a.render(r.a.createElement(i.a,{store:G},r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},35:function(e,t,n){e.exports=n.p+"static/media/wowIcon.7ea61479.png"},82:function(e,t,n){e.exports=n(149)},91:function(e,t,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.c349e0b2.chunk.js.map